<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Product Attributes and Values &#8212; Drupal Commerce 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Products and types" href="products.html" />
    <link rel="prev" title="Product Variations and types" href="variations.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head>
  <body role="document">
    <header id="pageheader"><h1><a href="../../index.html ">
        Drupal Commerce 0.0.1 documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="variations.html" title="Previous document">Product Variations and types</a>
        </li>
        <li>
          <a href="products.html" title="Next document">Products and types</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../../index.html">Drupal Commerce 0.0.1 documentation</a></li>
      <li>
        <a href="../index.html">Commerce 2.x</a>
      </li>
      <li>
        <a href="index.html">Code Recipes</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="product-attributes-and-values">
<h1>Product Attributes and Values<a class="headerlink" href="#product-attributes-and-values" title="Permalink to this headline">¶</a></h1>
<p>Product variation types can have certain attributes (ex. color) and
those attributes have values (ex red, blue). In this example, we will
create two attributes (color and size) and add them to the variation
type we made previously.</p>
<div class="section" id="creating-attributes">
<h2>Creating attributes<a class="headerlink" href="#creating-attributes" title="Permalink to this headline">¶</a></h2>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * id [String]</span>
<span class="sd"> *   The primary key for this attribute.</span>
<span class="sd"> *</span>
<span class="sd"> * label [String]</span>
<span class="sd"> *   The label for this attribute.</span>
<span class="sd"> */</span>
<span class="nv">$color_attribute</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductAttribute</span><span class="o">::</span><span class="na">create</span><span class="p">([</span>
  <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;color&#39;</span><span class="p">,</span>
  <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Color&#39;</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$color_attribute</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

<span class="nv">$size_attribute</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductAttribute</span><span class="o">::</span><span class="na">create</span><span class="p">([</span>
  <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span>
  <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Size&#39;</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$size_attribute</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

<span class="c1">// We load a service that adds the attributes to the variation type we made previously.</span>
<span class="nv">$attribute_field_manager</span> <span class="o">=</span> <span class="nx">\Drupal</span><span class="o">::</span><span class="na">service</span><span class="p">(</span><span class="s1">&#39;commerce_product.attribute_field_manager&#39;</span><span class="p">);</span>

<span class="nv">$attribute_field_manager</span><span class="o">-&gt;</span><span class="na">createField</span><span class="p">(</span><span class="nv">$color_attribute</span><span class="p">,</span> <span class="s1">&#39;my_custom_variation_type&#39;</span><span class="p">);</span>
<span class="nv">$attribute_field_manager</span><span class="o">-&gt;</span><span class="na">createField</span><span class="p">(</span><span class="nv">$size_attribute</span><span class="p">,</span> <span class="s1">&#39;my_custom_variation_type&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="loading-an-attribute">
<h2>Loading an attribute<a class="headerlink" href="#loading-an-attribute" title="Permalink to this headline">¶</a></h2>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// Loading is based off of the primary key [String] that was defined when creating it.</span>
<span class="nv">$size_attribute</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductAttribute</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-values-for-an-attribute">
<h2>Creating values for an attribute<a class="headerlink" href="#creating-values-for-an-attribute" title="Permalink to this headline">¶</a></h2>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * attribute [String]</span>
<span class="sd"> *   Foreign key of the attribute we want.</span>
<span class="sd"> *</span>
<span class="sd"> * name [String]</span>
<span class="sd"> *   The name of this value.</span>
<span class="sd"> */</span>
<span class="nv">$red</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductAttributeValue</span><span class="o">::</span><span class="na">create</span><span class="p">([</span>
  <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;color&#39;</span><span class="p">,</span>
  <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$red</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

<span class="nv">$blue</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductAttributeValue</span><span class="o">::</span><span class="na">create</span><span class="p">([</span>
  <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;color&#39;</span><span class="p">,</span>
  <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Blue&#39;</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$blue</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

<span class="nv">$medium</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductAttributeValue</span><span class="o">::</span><span class="na">create</span><span class="p">([</span>
  <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span>
  <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Medium&#39;</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$medium</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

<span class="nv">$large</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductAttributeValue</span><span class="o">::</span><span class="na">create</span><span class="p">([</span>
  <span class="s1">&#39;attribute&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span>
  <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Large&#39;</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$large</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="loading-an-attribute-value">
<h2>Loading an attribute value<a class="headerlink" href="#loading-an-attribute-value" title="Permalink to this headline">¶</a></h2>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// Loading is based off of the primary key [Integer]</span>
<span class="c1">//   1 would be the first one saved, 2 the next, etc.</span>
<span class="nv">$red</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductAttributeValue</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="assigning-attributes-to-a-variation">
<h2>Assigning attributes to a variation<a class="headerlink" href="#assigning-attributes-to-a-variation" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s say we want our hypothetical product to have two variations. One
will be the color red and size medium, and the other will be the color
blue and size large. // [IMPORTANT] - If a Product Variation Type has
fields for attributes (as we added above), then variations of that type
MUST have those attributes.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * attribute_&lt;ATTRIBUTE_ID&gt; [\Drupal\commerce_product\Entity\ProductAttributeValueInterface]</span>
<span class="sd"> *   The attribute value entity to use for the attribute type.</span>
<span class="sd"> */</span>
<span class="nv">$variation_red_medium</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductVariation</span><span class="o">::</span><span class="na">create</span><span class="p">([</span>
  <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my_custom_variation_type&#39;</span><span class="p">,</span>
  <span class="s1">&#39;sku&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;product-red-medium&#39;</span><span class="p">,</span>
  <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">\Drupal\commerce_price\Price</span><span class="p">(</span><span class="s1">&#39;10.00&#39;</span><span class="p">,</span> <span class="s1">&#39;USD&#39;</span><span class="p">),</span>
  <span class="s1">&#39;attribute_color&#39;</span> <span class="o">=&gt;</span> <span class="nv">$red</span><span class="p">,</span>
  <span class="s1">&#39;attribute_size&#39;</span> <span class="o">=&gt;</span> <span class="nv">$medium</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$variation_red_medium</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

<span class="nv">$variation_blue_large</span> <span class="o">=</span> <span class="nx">\Drupal\commerce_product\Entity\ProductVariation</span><span class="o">::</span><span class="na">create</span><span class="p">([</span>
  <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my_custom_variation_type&#39;</span><span class="p">,</span>
  <span class="s1">&#39;sku&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;product-blue-large&#39;</span><span class="p">,</span>
  <span class="s1">&#39;price&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">\Drupal\commerce_price\Price</span><span class="p">(</span><span class="s1">&#39;10.00&#39;</span><span class="p">,</span> <span class="s1">&#39;USD&#39;</span><span class="p">),</span>
  <span class="s1">&#39;attribute_color&#39;</span> <span class="o">=&gt;</span> <span class="nv">$blue</span><span class="p">,</span>
  <span class="s1">&#39;attribute_size&#39;</span> <span class="o">=&gt;</span> <span class="nv">$large</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$variation_blue_large</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Product Attributes and Values</a><ul>
<li><a class="reference internal" href="#creating-attributes">Creating attributes</a></li>
<li><a class="reference internal" href="#loading-an-attribute">Loading an attribute</a></li>
<li><a class="reference internal" href="#creating-values-for-an-attribute">Creating values for an attribute</a></li>
<li><a class="reference internal" href="#loading-an-attribute-value">Loading an attribute value</a></li>
<li><a class="reference internal" href="#assigning-attributes-to-a-variation">Assigning attributes to a variation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="variations.html"
                        title="previous chapter">Product Variations and types</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="products.html"
                        title="next chapter">Products and types</a></p>
<div class="sourcelink">
  <a href="../../_sources/v2/recipes/attributes.rst.txt" rel="nofollow">
    Show page source
  </a>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="variations.html" title="Previous document">Product Variations and types</a>
        </li>
        <li>
          <a href="products.html" title="Next document">Products and types</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../../index.html">Drupal Commerce 0.0.1 documentation</a></li>
      <li>
        <a href="../index.html">Commerce 2.x</a>
      </li>
      <li>
        <a href="index.html">Code Recipes</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2017, Commerce Guys.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.5.2
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>